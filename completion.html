<!DOCTYPE html>
<html>
<head>
    <title>ACF Keeping Active — Complete</title>
    <link rel="stylesheet" href="style.css">
    <script src="graphUpload.js"></script>

    <script>
        let sessionData = JSON.parse(localStorage.getItem("current_session")) || null;
        let sessionHistory = JSON.parse(localStorage.getItem("sessionHistory")) || [];

        if (!sessionData) {
            alert("No session data found.");
            window.location.href = "index.html";
        }

        function loadSummary() {
            const table = document.getElementById("summaryTable");
            const last = sessionHistory[sessionHistory.length - 1];

            table.innerHTML = `
                <tr>
                    <th>Surname</th>
                    <th>First Name</th>
                    <th>Score</th>
                </tr>
            `;

            last.results.forEach(r => {
                table.insertAdjacentHTML("beforeend", `
                    <tr>
                        <td>${r.surname}</td>
                        <td>${r.firstname}</td>
                        <td>${r.score}</td>
                    </tr>
                `);
            });
        }

        window.onload = loadSummary;
    </script>
</head>

<body>

<div class="ka-header">ACF Keeping Active — Session Complete</div>

<h2 class="page-title">Summary</h2>

<table id="summaryTable"></table>

<button class="btn btn-primary" onclick="uploadSessionHistory()">Upload Session →</button>

</body>
</html>