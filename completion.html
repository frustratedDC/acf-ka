<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Uploading Session</title>
</head>
<body>

<h2>Uploading Sessionâ€¦</h2>

<script src="config.js"></script>
<script src="graphAuth.js"></script>
<script src="graphUpload.js"></script>

<script>
(async () => {
    try {
        const session = JSON.parse(localStorage.getItem("current_session"));
        await uploadSession(session);

        // wipe local data
        localStorage.removeItem("current_session");

        window.location.href = "index.html";
    } catch (err) {
        document.body.innerHTML = "<h2>Upload failed. Try again.</h2>";
    }
})();
</script>

</body>
</html>