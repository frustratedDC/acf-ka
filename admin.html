<!DOCTYPE html>
<html>
<head>
    <title>ACF Keeping Active — Admin</title>
    <link rel="stylesheet" href="style.css">

    <script>
        function resetAll() {
            if (!confirm("Are you sure? This will delete ALL data.")) return;

            localStorage.removeItem("sessionHistory");
            localStorage.removeItem("previousTotals");
            localStorage.removeItem("previousBests");
            localStorage.removeItem("current_session");

            alert("All data cleared.");
        }

        function exportData() {
            const data = {
                cadetMasterList: JSON.parse(localStorage.getItem("cadetMasterList")) || [],
                sessionHistory: JSON.parse(localStorage.getItem("sessionHistory")) || [],
                previousTotals: JSON.parse(localStorage.getItem("previousTotals")) || {},
                previousBests: JSON.parse(localStorage.getItem("previousBests")) || {}
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = url;
            a.download = "ka-backup.json";
            a.click();
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = e => {
                const data = JSON.parse(e.target.result);

                localStorage.setItem("cadetMasterList", JSON.stringify(data.cadetMasterList || []));
                localStorage.setItem("sessionHistory", JSON.stringify(data.sessionHistory || []));
                localStorage.setItem("previousTotals", JSON.stringify(data.previousTotals || {}));
                localStorage.setItem("previousBests", JSON.stringify(data.previousBests || {}));

                alert("Data imported successfully.");
            };

            reader.readAsText(file);
        }
    </script>
</head>

<body>

<div class="ka-header">ACF Keeping Active — Admin</div>

<h2 class="page-title">Admin Tools</h2>

<div class="section-box">
    <button class="btn btn-primary" onclick="resetAll()">Reset All Data</button>
</div>

<div class="section-box">
    <button class="btn btn-primary" onclick="exportData()">Export Data</button>
</div>

<div class="section-box">
    <p>Import Backup:</p>
    <input type="file" accept="application/json" onchange="importData(event)">
</div>

</body>
</html>