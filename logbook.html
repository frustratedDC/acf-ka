<!DOCTYPE html>
<html>
<head>
    <title>ACF Keeping Active — Logbook</title>
    <link rel="stylesheet" href="style.css">

    <script>
        let cadetMasterList = JSON.parse(localStorage.getItem("cadetMasterList")) || [];
        let sessionHistory = JSON.parse(localStorage.getItem("sessionHistory")) || [];

        function loadLogbook() {
            const container = document.getElementById("logContainer");

            if (sessionHistory.length === 0) {
                container.innerHTML = "<p>No sessions recorded yet.</p>";
                return;
            }

            cadetMasterList.forEach(cadet => {
                let block = `
                    <div class="section-box">
                        <h3>${cadet.firstname} ${cadet.surname}</h3>
                        <table>
                            <tr>
                                <th>Date</th>
                                <th>Det</th>
                                <th>Score</th>
                            </tr>
                `;

                sessionHistory.forEach(session => {
                    const entry = session.results.find(r => r.id === cadet.id);
                    if (entry) {
                        block += `
                            <tr>
                                <td>${session.date}</td>
                                <td>${session.det}</td>
                                <td>${entry.score}</td>
                            </tr>
                        `;
                    }
                });

                block += "</table></div>";
                container.insertAdjacentHTML("beforeend", block);
            });
        }

        window.onload = loadLogbook;
    </script>
</head>

<body>

<div class="ka-header">ACF Keeping Active — Logbook</div>

<h2 class="page-title">Cadet Logbook</h2>

<div id="logContainer"></div>

</body>
</html>