<!DOCTYPE html>
<html>
<head>
    <title>ACF Keeping Active — Progression</title>
    <link rel="stylesheet" href="style.css">

    <script>
        let cadetMasterList = JSON.parse(localStorage.getItem("cadetMasterList")) || [];
        let previousTotals = JSON.parse(localStorage.getItem("previousTotals")) || {};
        let previousBests = JSON.parse(localStorage.getItem("previousBests")) || {};

        function loadProgression() {
            const table = document.getElementById("progressTable");

            table.innerHTML = `
                <tr>
                    <th>Surname</th>
                    <th>First Name</th>
                    <th>Total Points</th>
                    <th>Best Score</th>
                </tr>
            `;

            cadetMasterList.forEach(cadet => {
                const total = previousTotals[cadet.id] || 0;
                const best = previousBests[cadet.id] || 0;

                table.insertAdjacentHTML("beforeend", `
                    <tr>
                        <td>${cadet.surname}</td>
                        <td>${cadet.firstname}</td>
                        <td>${total}</td>
                        <td>${best}</td>
                    </tr>
                `);
            });
        }

        window.onload = loadProgression;
    </script>
</head>

<body>

<div class="ka-header">ACF Keeping Active — Progression</div>

<h2 class="page-title">Cadet Progression</h2>

<table id="progressTable"></table>

</body>
</html>